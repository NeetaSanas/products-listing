(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[775],{7775:(r,e,t)=>{"use strict";t.r(e),t.d(e,{LoginModule:()=>H,routes:()=>$});var o=t(8583),s=t(3735),n=t(665),a=t(7716);class i{constructor(r,e,t,o){this.email=r,this.token=e,this.localId=t,this.expirationDate=o}get expireDate(){return this.expirationDate}get userToken(){return this.token}}var l=t(1841),c=t(4220);let u=(()=>{class r{constructor(r,e){this.http=r,this.store=e}signUp(r,e,t,o,s,n){const a={firstname:r,lastname:e,contact:t,email:o,password:s,retype_password:n};return console.log(a),this.http.post("http://localhost:3000/users",a)}login(r,e){return console.log(r,e),this.http.get("http://localhost:3000/users")}formatUser(r){const e=new Date((new Date).getTime()+1e3*+r.expiresIn);return new i(r.email,r.idToken,r.localId,e)}getErrorMessage(r){switch(r){case"EMAIL_NOT_FOUND":return"Email Not Found";case"INVALID_PASSWORD":return"Invalid Password";case"EMAIL_EXISTS":return"Email already exists";default:return"Unknown error occurred. Please try again"}}setUserInLocalStorage(r){localStorage.setItem("userData",JSON.stringify(r)),this.runTimeoutInterval(r)}runTimeoutInterval(r){const e=(new Date).getTime(),t=r.expireDate.getTime();this.timeoutInterval=setTimeout(()=>{},t-e)}}return r.\u0275fac=function(e){return new(e||r)(a.LFG(l.eN),a.LFG(c.yh))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var p=t(9344),m=t(8262);function f(r,e){1&r&&(a.TgZ(0,"span",14),a._uU(1,"Email is required"),a.qZA())}function d(r,e){1&r&&(a.TgZ(0,"span",14),a._uU(1,"Invalid email"),a.qZA())}function g(r,e){1&r&&(a.TgZ(0,"span",14),a._uU(1,"Password is required"),a.qZA())}function h(r,e){1&r&&(a.TgZ(0,"span",14),a._uU(1,"Enter minimum 6 characters"),a.qZA())}let Z=(()=>{class r{constructor(r,e,t,o,s){this.fb=r,this.authService=e,this.router=t,this.toastr=o,this.store=s,this.users=[],this.form=this.fb.group({email:[null,n.kI.compose([n.kI.required,n.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,n.kI.compose([n.kI.required,n.kI.minLength(6)])]})}ngOnInit(){console.log("login")}onSubmit(){console.log(this.form.value.email,this.form.value.password),this.currentUser=this.form.value.email,this.authService.login(this.form.value.email,this.form.value.password).subscribe(r=>{let e=!1;if(console.log(r),r){this.users=r;for(let r=0;r<this.users.length;r++)(this.form.value.email=this.users[r].email&&this.form.value.password==this.users[r].password)?(console.log("if"),console.log(this.currentUser),localStorage.setItem("user",this.currentUser),console.log(localStorage.getItem("user")),this.toastr.success("Login Success"),e=!0,this.router.navigate(["/"])):e=!1;console.log(e),e||(console.log(e),this.toastr.error("Invalid email or password"))}else console.log("Users not found")},r=>{})}forgotPassword(){}}return r.\u0275fac=function(e){return new(e||r)(a.Y36(n.qu),a.Y36(u),a.Y36(s.F0),a.Y36(p._W),a.Y36(c.yh))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-login"]],decls:21,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login/signup","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","email","name","email","placeholder","Email","formControlName","email"],["class","error-message",4,"ngIf"],[1,"fa","fa-key","icon"],["type","password","id","password","placeholder","Password","name","password","formControlName","password"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button"],["color","accent","routerLink","/forgot-password",1,"w-100","link"],[1,"error-message"]],template:function(r,e){1&r&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return e.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Don't have an account? Sign up now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a.qZA(),a.YNc(9,f,2,0,"span",8),a.YNc(10,d,2,0,"span",8),a.TgZ(11,"div",5),a._UZ(12,"i",9),a._UZ(13,"input",10),a.qZA(),a.YNc(14,g,2,0,"span",8),a.YNc(15,h,2,0,"span",8),a.TgZ(16,"div",11),a.TgZ(17,"button",12),a._uU(18,"LOGIN"),a.qZA(),a.qZA(),a.TgZ(19,"a",13),a._uU(20,"Forgot Password?"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&r&&(a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","LOGIN")("hasBgImage",!0),a.xp6(7),a.Q6J("ngIf",(null==e.form.controls.email.errors?null:e.form.controls.email.errors.required)&&e.form.controls.email.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.email.errors?null:e.form.controls.email.errors.pattern),a.xp6(4),a.Q6J("ngIf",(null==e.form.controls.password.errors?null:e.form.controls.password.errors.required)&&e.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.password.hasError("minlength")))},directives:[n._Y,n.JL,n.sg,m.G,s.yS,n.Fj,n.JJ,n.u,o.O5],styles:["html[_ngcontent-%COMP%]{background-image:url(https://images.unsplash.com/photo-1529539795054-3c162aab037a?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bG9naW58ZW58MHx8MHx8&ixlib=rb-1.2.1&q=60&w=600)}.icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width: 780px){.container[_ngcontent-%COMP%]{margin-top:100px}}"]}),r})();var w=t(5887),_=t(5917),v=t(7479),x=t(8002),I=t(5304),q=t(3342);(0,c.PH)("[shared state] set loading spinner",(0,c.Ky)());const U=(0,c.PH)("[shared state] set error message",(0,c.Ky)()),y=(0,c.PH)("[auth page] login start",(0,c.Ky)()),T=(0,c.PH)("[auth page] login Success",(0,c.Ky)()),b=(0,c.PH)("[auth page] signup start",(0,c.Ky)()),k=(0,c.PH)("[auth page] signup Success",(0,c.Ky)());let A=(()=>{class r{constructor(r,e,t,o,s){this.actions$=r,this.authService=e,this.store=t,this.router=o,this.toastr=s,this.login$=(0,w.GW)(()=>this.actions$.pipe((0,w.l4)(y),(0,v.z)(r=>this.authService.login(r.email,r.password).pipe((0,x.U)(r=>{this.store.dispatch(U({message:""}));const e=this.authService.formatUser(r);return this.authService.setUserInLocalStorage(e),T({user:e,redirect:!0})}),(0,I.K)(r=>{const e=this.authService.getErrorMessage(r.error.error.message);return(0,_.of)(U({message:e}))}))))),this.loginRedirect$=(0,w.GW)(()=>this.actions$.pipe((0,w.l4)(T),(0,q.b)(r=>{this.store.dispatch(U({message:""})),r.redirect?(this.toastr.success("Login Success"),this.router.navigate(["/"])):this.toastr.error("Login Failed")})),{dispatch:!1}),this.signupRedirect$=(0,w.GW)(()=>this.actions$.pipe((0,w.l4)(k),(0,q.b)(r=>{this.router.navigate(["/"])})),{dispatch:!1}),this.signUp$=(0,w.GW)(()=>this.actions$.pipe((0,w.l4)(b),(0,v.z)(r=>this.authService.signUp(r.firstname,r.lastname,r.contact,r.email,r.password,r.retype_password).pipe((0,x.U)(r=>{const e=this.authService.formatUser(r);return this.authService.setUserInLocalStorage(e),k({user:e})})))))}}return r.\u0275fac=function(e){return new(e||r)(a.LFG(w.eX),a.LFG(u),a.LFG(c.yh),a.LFG(s.F0),a.LFG(p._W))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac}),r})();var N=t(9520),S=t(1404);function L(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function J(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function P(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function F(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Enter only numbers"),a.qZA())}function Y(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function C(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Invalid email"),a.qZA())}function G(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function M(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Enter minimum 6 characters"),a.qZA())}function O(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function Q(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Enter minimum 6 characters"),a.qZA())}function E(r,e){1&r&&(a.TgZ(0,"span",20),a._uU(1,"Password not matching"),a.qZA())}let z=(()=>{class r{constructor(r,e){this.fb=r,this.store=e,this.form=this.fb.group({firstname:[null,n.kI.compose([n.kI.required])],lastname:[null,n.kI.compose([n.kI.required])],contact:[null,n.kI.compose([n.kI.required,n.kI.pattern("^[0-9]+$")])],email:["",n.kI.compose([n.kI.required,n.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,n.kI.compose([n.kI.required,n.kI.minLength(6)])],retype_password:[null,n.kI.compose([n.kI.required,n.kI.minLength(6)])]})}ngOnInit(){console.log("In signup")}onSubmit(){console.log(this.form.value),this.form.valid&&this.store.dispatch(b({firstname:this.form.value.firstname,lastname:this.form.value.lastname,contact:this.form.value.contact,email:this.form.value.email,password:this.form.value.password,retype_password:this.form.value.retype_password}))}validateForm(){if(this.form.controls.password.value!==this.form.controls.retype_password.value)return this.form.controls.retype_password.setErrors({mismatchedPasswords:!0})}}return r.\u0275fac=function(e){return new(e||r)(a.Y36(n.qu),a.Y36(c.yh))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-signup"]],decls:46,vars:18,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","firstname","placeholder","First Name","name","firstname","formControlName","firstname"],["class","error-message",4,"ngIf"],["type","text","id","lastname","placeholder","Last Name","name","lastname","formControlName","lastname"],[1,"fa","fa-phone","icon"],["type","text","id","contact","placeholder","Contact","name","contact","formControlName","contact"],[1,"fa","fa-envelope","icon"],["type","text","id","email","placeholder","Email","name","email","formControlName","email"],[1,"fa","fa-key","icon"],["type","password","placeholder","Password","id","password","name","password","formControlName","password",3,"input"],["type","password","placeholder","Retype Password","id","retype_password","name","retype_password","formControlName","retype_password",3,"input"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button",3,"disabled"],["color","accent","routerLink","/",1,"w-100","link"],[1,"error-message"]],template:function(r,e){1&r&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return e.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Already have an account? login now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a._UZ(9,"br"),a.qZA(),a.YNc(10,L,2,0,"span",8),a.TgZ(11,"div",5),a._UZ(12,"i",6),a._UZ(13,"input",9),a._UZ(14,"br"),a.qZA(),a.YNc(15,J,2,0,"span",8),a.TgZ(16,"div",5),a._UZ(17,"i",10),a._UZ(18,"input",11),a._UZ(19,"br"),a.qZA(),a.YNc(20,P,2,0,"span",8),a.YNc(21,F,2,0,"span",8),a.TgZ(22,"div",5),a._UZ(23,"i",12),a._UZ(24,"input",13),a._UZ(25,"br"),a.qZA(),a.YNc(26,Y,2,0,"span",8),a.YNc(27,C,2,0,"span",8),a.TgZ(28,"div",5),a._UZ(29,"i",14),a.TgZ(30,"input",15),a.NdJ("input",function(){return e.validateForm()}),a.qZA(),a._UZ(31,"br"),a.qZA(),a.YNc(32,G,2,0,"span",8),a.YNc(33,M,2,0,"span",8),a.TgZ(34,"div",5),a._UZ(35,"i",14),a.TgZ(36,"input",16),a.NdJ("input",function(){return e.validateForm()}),a.qZA(),a._UZ(37,"br"),a.qZA(),a.YNc(38,O,2,0,"span",8),a.YNc(39,Q,2,0,"span",8),a.YNc(40,E,2,0,"span",8),a.TgZ(41,"div",17),a.TgZ(42,"button",18),a._uU(43,"SIGNUP"),a.qZA(),a.qZA(),a.TgZ(44,"a",19),a._uU(45,"Back to Homepage"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&r&&(a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","SIGNUP")("hasBgImage",!0),a.xp6(8),a.Q6J("ngIf",(null==e.form.controls.firstname.errors?null:e.form.controls.firstname.errors.required)&&e.form.controls.firstname.touched),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.lastname.errors?null:e.form.controls.lastname.errors.required)&&e.form.controls.lastname.touched),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.contact.errors?null:e.form.controls.contact.errors.required)&&e.form.controls.contact.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.contact.errors?null:e.form.controls.contact.errors.pattern),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.email.errors?null:e.form.controls.email.errors.required)&&e.form.controls.email.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.email.errors?null:e.form.controls.email.errors.pattern),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.password.errors?null:e.form.controls.password.errors.required)&&e.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.password.hasError("minlength")),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.retype_password.errors?null:e.form.controls.retype_password.errors.required)&&e.form.controls.retype_password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.retype_password.hasError("minlength")),a.xp6(1),a.Q6J("ngIf",e.form.controls.retype_password.hasError("mismatchedPasswords")),a.xp6(2),a.Q6J("disabled",!e.form.valid))},directives:[n._Y,n.JL,n.sg,m.G,s.yS,n.Fj,n.JJ,n.u,o.O5],styles:[".icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width: 780px){.container[_ngcontent-%COMP%]{margin-top:100px}}"]}),r})();var D=t(9880);const $=[{path:"",children:[{path:"",redirectTo:"login"},{path:"login",component:Z},{path:"signup",component:z}]}];let H=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({providers:[u,{provide:o.mr,useValue:"/"}],imports:[[o.ez,D.O,s.Bz.forChild($),n.u5,n.UX,w.sQ.forFeature([A]),c.Aw.forFeature(N.a,S.l)]]}),r})()}}]);