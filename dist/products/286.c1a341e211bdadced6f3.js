(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[286],{2286:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LoginModule:()=>G,routes:()=>T});var o=r(8583),s=r(3735),n=r(665),i=r(7716),a=r(3204),c=r(9344),l=r(4220),u=r(8262);function p(e,t){1&e&&(i.TgZ(0,"span",14),i._uU(1,"Email is required"),i.qZA())}function h(e,t){1&e&&(i.TgZ(0,"span",14),i._uU(1,"Invalid email"),i.qZA())}function g(e,t){1&e&&(i.TgZ(0,"span",14),i._uU(1,"Password is required"),i.qZA())}function m(e,t){1&e&&(i.TgZ(0,"span",14),i._uU(1,"Enter minimum 6 characters"),i.qZA())}let f=(()=>{class e{constructor(e,t,r,o,s){this.fb=e,this.authService=t,this.router=r,this.toastr=o,this.store=s,this.users=[],this.form=this.fb.group({email:[null,n.kI.compose([n.kI.required,n.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,n.kI.compose([n.kI.required,n.kI.minLength(6)])]})}ngOnInit(){console.log("login")}onSubmit(){console.log(this.form.value.email,this.form.value.password),this.currentUser=this.form.value.email,this.authService.login().subscribe(e=>{let t=!1;if(console.log(e),e){this.users=e;for(let e=0;e<this.users.length;e++)(this.form.value.email=this.users[e].email&&this.form.value.password==this.users[e].password)?(console.log("if"),console.log(this.currentUser),localStorage.setItem("user",this.currentUser),console.log(localStorage.getItem("user")),this.toastr.success("Login Success"),t=!0,this.router.navigate(["/"])):t=!1;console.log(t),t||(console.log(t),this.toastr.error("Invalid email or password"))}else console.log("Users not found")},e=>{})}forgotPassword(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(n.qu),i.Y36(a.e),i.Y36(s.F0),i.Y36(c._W),i.Y36(l.yh))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-login"]],decls:21,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login/signup","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","email","name","email","placeholder","Email","formControlName","email"],["class","error-message",4,"ngIf"],[1,"fa","fa-key","icon"],["type","password","id","password","placeholder","Password","name","password","formControlName","password"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button"],["color","accent","routerLink","/forgot-password",1,"w-100","link"],[1,"error-message"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"form",1),i.NdJ("ngSubmit",function(){return t.onSubmit()}),i._UZ(2,"app-header",2),i.TgZ(3,"div",3),i.TgZ(4,"a",4),i._uU(5,"Don't have an account? Sign up now!"),i.qZA(),i.TgZ(6,"div",5),i._UZ(7,"i",6),i._UZ(8,"input",7),i.qZA(),i.YNc(9,p,2,0,"span",8),i.YNc(10,h,2,0,"span",8),i.TgZ(11,"div",5),i._UZ(12,"i",9),i._UZ(13,"input",10),i.qZA(),i.YNc(14,g,2,0,"span",8),i.YNc(15,m,2,0,"span",8),i.TgZ(16,"div",11),i.TgZ(17,"button",12),i._uU(18,"LOGIN"),i.qZA(),i.qZA(),i.TgZ(19,"a",13),i._uU(20,"Forgot Password?"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(1),i.Q6J("formGroup",t.form),i.xp6(1),i.Tol("card-spacing"),i.Q6J("icon","exit_to_app")("title","LOGIN")("hasBgImage",!0),i.xp6(7),i.Q6J("ngIf",(null==t.form.controls.email.errors?null:t.form.controls.email.errors.required)&&t.form.controls.email.touched),i.xp6(1),i.Q6J("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.pattern),i.xp6(4),i.Q6J("ngIf",(null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)&&t.form.controls.password.touched),i.xp6(1),i.Q6J("ngIf",t.form.controls.password.hasError("minlength")))},directives:[n._Y,n.JL,n.sg,u.G,s.yS,n.Fj,n.JJ,n.u,o.O5],styles:["html[_ngcontent-%COMP%]{background-image:url(https://images.unsplash.com/photo-1529539795054-3c162aab037a?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bG9naW58ZW58MHx8MHx8&ixlib=rb-1.2.1&q=60&w=600)}.container[_ngcontent-%COMP%]{margin-top:0!important}.icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width: 780px){.container[_ngcontent-%COMP%]{margin-top:100px}}"]}),e})();var d=r(5887),w=r(5917),v=r(7479),Z=r(8002),x=r(5304),b=r(3342);(0,l.PH)("[shared state] set loading spinner",(0,l.Ky)());const U=(0,l.PH)("[shared state] set error message",(0,l.Ky)());var _=r(385);let S=(()=>{class e{constructor(e,t,r,o,s){this.actions$=e,this.authService=t,this.store=r,this.router=o,this.toastr=s,this.login$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(_.h8),(0,v.z)(e=>this.authService.login().pipe((0,Z.U)(e=>{this.store.dispatch(U({message:""}));const t=this.authService.formatUser(e);return this.authService.setUserInLocalStorage(t),(0,_.he)({user:t,redirect:!0})}),(0,x.K)(e=>{const t=this.authService.getErrorMessage(e.error.error.message);return(0,w.of)(U({message:t}))}))))),this.loginRedirect$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(_.he),(0,b.b)(e=>{this.store.dispatch(U({message:""})),e.redirect?(this.toastr.success("Login Success"),this.router.navigate(["/"])):this.toastr.error("Login Failed")})),{dispatch:!1}),this.signupRedirect$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(_.$R),(0,b.b)(e=>{this.router.navigate(["/"])})),{dispatch:!1}),this.signUp$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(_.UT),(0,v.z)(e=>this.authService.signUp(e.firstname,e.lastname,e.contact,e.email,e.password,e.retype_password).pipe((0,Z.U)(e=>{const t=this.authService.formatUser(e);return this.authService.setUserInLocalStorage(t),(0,_.$R)({user:t})})))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(d.eX),i.LFG(a.e),i.LFG(l.yh),i.LFG(s.F0),i.LFG(c._W))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var I=r(9520),q=r(1404),k=r(657),y=r(9880),L=r(9299),A=r(3547),F=r(7031);const T=[{path:"",children:[{path:"",redirectTo:"login"},{path:"login",component:f},{path:"signup",component:k.X}]}];let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[a.e,{provide:o.mr,useValue:"/"},L.x,{provide:F.i,useValue:F.i}],imports:[[A.S,o.ez,y.O,s.Bz.forChild(T),n.u5,n.UX,d.sQ.forFeature([S]),l.Aw.forFeature(I.a,q.l)]]}),e})()}}]);