(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[279],{4279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LoginModule:()=>E,routes:()=>G});var o=r(8583),n=r(3735),s=r(665),a=r(7716);class i{constructor(e,t,r,o){this.email=e,this.token=t,this.localId=r,this.expirationDate=o}get expireDate(){return this.expirationDate}get userToken(){return this.token}}var c=r(1841),l=r(4220);let u=(()=>{class e{constructor(e,t){this.http=e,this.store=t}signUp(e,t,r,o,n,s){const a={firstname:e,lastname:t,contact:r,email:o,password:n,retype_password:s};return console.log(a),this.http.post("http://localhost:3000/users",a)}login(e,t){return console.log(e,t),this.http.get("http://localhost:3000/users")}formatUser(e){const t=new Date((new Date).getTime()+1e3*+e.expiresIn);return new i(e.email,e.idToken,e.localId,t)}getErrorMessage(e){switch(e){case"EMAIL_NOT_FOUND":return"Email Not Found";case"INVALID_PASSWORD":return"Invalid Password";case"EMAIL_EXISTS":return"Email already exists";default:return"Unknown error occurred. Please try again"}}setUserInLocalStorage(e){localStorage.setItem("userData",JSON.stringify(e)),this.runTimeoutInterval(e)}runTimeoutInterval(e){const t=(new Date).getTime(),r=e.expireDate.getTime();this.timeoutInterval=setTimeout(()=>{},r-t)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.eN),a.LFG(l.yh))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=r(9344);function m(e,t){if(1&e&&(a.TgZ(0,"h1"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}function g(e,t){if(1&e&&(a.TgZ(0,"h4",3),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.desc)}}let d=(()=>{class e{constructor(){this.hasBgImage=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-header"]],inputs:{icon:"icon",title:"title",desc:"desc",hasBgImage:"hasBgImage",class:"class"},decls:3,vars:5,consts:[[1,"content-header","bg-primary",3,"ngClass"],[4,"ngIf"],["class","p-2",4,"ngIf"],[1,"p-2"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.YNc(1,m,2,1,"h1",1),a.YNc(2,g,2,1,"h4",2),a.qZA()),2&e&&(a.ekj("bg-image",t.hasBgImage),a.Q6J("ngClass",t.class),a.xp6(1),a.Q6J("ngIf",t.title),a.xp6(1),a.Q6J("ngIf",t.desc))},directives:[o.mk,o.O5],styles:[".content-header[_ngcontent-%COMP%]{color:#fff!important;text-align:center}.content-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:230px;height:130px;border-radius:50%}.content-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;font-weight:400;margin:0}.content-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:300;max-width:580px;text-align:center;margin:0 auto}.content-header.bg-image[_ngcontent-%COMP%]{background-image:url(/assets/header-bg.png);background-blend-mode:overlay;background-size:600px}@media screen and (min-width: 960px){.content-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}.content-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}.content-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.content-header.has-bg-image[_ngcontent-%COMP%]{background-size:480px}}"]}),e})();function f(e,t){1&e&&(a.TgZ(0,"span",14),a._uU(1,"Email is required"),a.qZA())}function h(e,t){1&e&&(a.TgZ(0,"span",14),a._uU(1,"Password is required"),a.qZA())}function Z(e,t){1&e&&(a.TgZ(0,"span",14),a._uU(1,"Password isn't long enough, minimum of 6 characters"),a.qZA())}let w=(()=>{class e{constructor(e,t,r,o,n){this.fb=e,this.authService=t,this.router=r,this.toastr=o,this.store=n,this.users=[],this.form=this.fb.group({email:[null,s.kI.compose([s.kI.required])],password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])]})}ngOnInit(){console.log("login")}onSubmit(){console.log(this.form.value.email,this.form.value.password),this.currentUser=this.form.value.email,this.authService.login(this.form.value.email,this.form.value.password).subscribe(e=>{let t=!1;if(console.log(e),e){this.users=e;for(let e=0;e<this.users.length;e++)(this.form.value.email=this.users[e].email&&this.form.value.password==this.users[e].password)?(console.log("if"),console.log(this.currentUser),localStorage.setItem("user",this.currentUser),console.log(localStorage.getItem("user")),this.router.navigate(["/"]),this.toastr.success("Login Success"),t=!0):t=!1;console.log(t),t||(console.log(t),this.toastr.error("Invalid email or password"))}else console.log("Users not found")},e=>{})}forgotPassword(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.qu),a.Y36(u),a.Y36(n.F0),a.Y36(p._W),a.Y36(l.yh))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-login"]],decls:20,vars:9,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login/signup","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","email","name","email","placeholder","Email","formControlName","email"],["class","error-message",4,"ngIf"],[1,"fa","fa-key","icon"],["type","password","id","password","placeholder","Password","name","password","formControlName","password"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button"],["color","accent","routerLink","/forgot-password",1,"w-100","link"],[1,"error-message"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Don't have an account? Sign up now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a.qZA(),a.YNc(9,f,2,0,"span",8),a.TgZ(10,"div",5),a._UZ(11,"i",9),a._UZ(12,"input",10),a.qZA(),a.YNc(13,h,2,0,"span",8),a.YNc(14,Z,2,0,"span",8),a.TgZ(15,"div",11),a.TgZ(16,"button",12),a._uU(17,"LOGIN"),a.qZA(),a.qZA(),a.TgZ(18,"a",13),a._uU(19,"Forgot Password?"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.Q6J("formGroup",t.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","LOGIN")("hasBgImage",!0),a.xp6(7),a.Q6J("ngIf",(null==t.form.controls.email.errors?null:t.form.controls.email.errors.required)&&t.form.controls.email.touched),a.xp6(4),a.Q6J("ngIf",(null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)&&t.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",t.form.controls.password.hasError("minlength")))},directives:[s._Y,s.JL,s.sg,d,n.yS,s.Fj,s.JJ,s.u,o.O5],styles:[".icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}"]}),e})();var _=r(5887),x=r(5917),I=r(7479),v=r(8002),q=r(5304),U=r(3342);(0,l.PH)("[shared state] set loading spinner",(0,l.Ky)());const y=(0,l.PH)("[shared state] set error message",(0,l.Ky)()),b=(0,l.PH)("[auth page] login start",(0,l.Ky)()),k=(0,l.PH)("[auth page] login Success",(0,l.Ky)()),T=(0,l.PH)("[auth page] signup start",(0,l.Ky)()),A=(0,l.PH)("[auth page] signup Success",(0,l.Ky)());let P=(()=>{class e{constructor(e,t,r,o,n){this.actions$=e,this.authService=t,this.store=r,this.router=o,this.toastr=n,this.login$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(b),(0,I.z)(e=>this.authService.login(e.email,e.password).pipe((0,v.U)(e=>{this.store.dispatch(y({message:""}));const t=this.authService.formatUser(e);return this.authService.setUserInLocalStorage(t),k({user:t,redirect:!0})}),(0,q.K)(e=>{const t=this.authService.getErrorMessage(e.error.error.message);return(0,x.of)(y({message:t}))}))))),this.loginRedirect$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(k),(0,U.b)(e=>{this.store.dispatch(y({message:""})),e.redirect?(this.toastr.success("Login Success"),this.router.navigate(["/"])):this.toastr.error("Login Failed")})),{dispatch:!1}),this.signupRedirect$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(A),(0,U.b)(e=>{this.router.navigate(["/"])})),{dispatch:!1}),this.signUp$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(T),(0,I.z)(e=>this.authService.signUp(e.firstname,e.lastname,e.contact,e.email,e.password,e.retype_password).pipe((0,v.U)(e=>{const t=this.authService.formatUser(e);return this.authService.setUserInLocalStorage(t),A({user:t})})))))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(_.eX),a.LFG(u),a.LFG(l.yh),a.LFG(n.F0),a.LFG(p._W))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var S=r(9520),C=r(1404);function O(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"firstname is required"),a.qZA())}function N(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"lastname is required"),a.qZA())}function L(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"contact is required"),a.qZA())}function J(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"email is required"),a.qZA())}function M(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"Password is required"),a.qZA())}function F(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"Password isn't long enough, minimum of 6 characters"),a.qZA())}function Y(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"Password is required"),a.qZA())}function Q(e,t){1&e&&(a.TgZ(0,"span",20),a._uU(1,"Password isn't long enough, minimum of 6 characters"),a.qZA())}const G=[{path:"",children:[{path:"",redirectTo:"login"},{path:"login",component:w},{path:"signup",component:(()=>{class e{constructor(e,t){this.fb=e,this.store=t,this.form=this.fb.group({firstname:[null,s.kI.compose([s.kI.required])],lastname:[null,s.kI.compose([s.kI.required])],contact:[null,s.kI.compose([s.kI.required])],email:[null,s.kI.compose([s.kI.required])],password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])],retype_password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])]})}ngOnInit(){console.log("In signup")}onSubmit(){console.log(this.form.value),this.form.valid&&this.store.dispatch(T({firstname:this.form.value.firstname,lastname:this.form.value.lastname,contact:this.form.value.contact,email:this.form.value.email,password:this.form.value.password,retype_password:this.form.value.retype_password}))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.qu),a.Y36(l.yh))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-signup"]],decls:43,vars:15,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","firstname","placeholder","First Name","name","firstname","formControlName","firstname"],["class","error-message",4,"ngIf"],["type","text","id","lastname","placeholder","Last Name","name","lastname","formControlName","lastname"],[1,"fa","fa-phone","icon"],["type","text","id","contact","placeholder","Contact","name","contact","formControlName","contact"],[1,"fa","fa-envelope","icon"],["type","text","id","email","placeholder","Email","name","email","formControlName","email"],[1,"fa","fa-key","icon"],["type","password","placeholder","Password","id","password","name","password","formControlName","password"],["type","password","placeholder","Retype Password","id","retype_password","name","retype_password","formControlName","retype_password"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button",3,"disabled"],["color","accent","routerLink","/",1,"w-100","link"],[1,"error-message"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Already have an account? login now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a._UZ(9,"br"),a.qZA(),a.YNc(10,O,2,0,"span",8),a.TgZ(11,"div",5),a._UZ(12,"i",6),a._UZ(13,"input",9),a._UZ(14,"br"),a.qZA(),a.YNc(15,N,2,0,"span",8),a.TgZ(16,"div",5),a._UZ(17,"i",10),a._UZ(18,"input",11),a._UZ(19,"br"),a.qZA(),a.YNc(20,L,2,0,"span",8),a.TgZ(21,"div",5),a._UZ(22,"i",12),a._UZ(23,"input",13),a._UZ(24,"br"),a.qZA(),a.YNc(25,J,2,0,"span",8),a.TgZ(26,"div",5),a._UZ(27,"i",14),a._UZ(28,"input",15),a._UZ(29,"br"),a.qZA(),a.YNc(30,M,2,0,"span",8),a.YNc(31,F,2,0,"span",8),a.TgZ(32,"div",5),a._UZ(33,"i",14),a._UZ(34,"input",16),a._UZ(35,"br"),a.qZA(),a.YNc(36,Y,2,0,"span",8),a.YNc(37,Q,2,0,"span",8),a.TgZ(38,"div",17),a.TgZ(39,"button",18),a._uU(40,"SIGNUP"),a.qZA(),a.qZA(),a.TgZ(41,"a",19),a._uU(42,"Back to Homepage"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.Q6J("formGroup",t.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","SIGNUP")("hasBgImage",!0),a.xp6(8),a.Q6J("ngIf",(null==t.form.controls.firstname.errors?null:t.form.controls.firstname.errors.required)&&t.form.controls.firstname.touched),a.xp6(5),a.Q6J("ngIf",(null==t.form.controls.lastname.errors?null:t.form.controls.lastname.errors.required)&&t.form.controls.lastname.touched),a.xp6(5),a.Q6J("ngIf",(null==t.form.controls.contact.errors?null:t.form.controls.contact.errors.required)&&t.form.controls.contact.touched),a.xp6(5),a.Q6J("ngIf",(null==t.form.controls.email.errors?null:t.form.controls.email.errors.required)&&t.form.controls.email.touched),a.xp6(5),a.Q6J("ngIf",(null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)&&t.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",t.form.controls.password.hasError("minlength")),a.xp6(5),a.Q6J("ngIf",(null==t.form.controls.retype_password.errors?null:t.form.controls.retype_password.errors.required)&&t.form.controls.retype_password.touched),a.xp6(1),a.Q6J("ngIf",t.form.controls.retype_password.hasError("minlength")),a.xp6(2),a.Q6J("disabled",!t.form.valid))},directives:[s._Y,s.JL,s.sg,d,n.yS,s.Fj,s.JJ,s.u,o.O5],styles:[".icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}"]}),e})()}]}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[u,{provide:o.mr,useValue:"/"}],imports:[[o.ez,n.Bz.forChild(G),s.u5,s.UX,_.sQ.forFeature([P]),l.Aw.forFeature(S.a,C.l)]]}),e})()}}]);