(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[319],{319:(t,e,s)=>{"use strict";s.r(e),s.d(e,{LoginModule:()=>F,routes:()=>G});var r=s(1116),o=s(509),i=s(1462),n=s(5366),a=s(599),c=s(3492),l=s(9878),u=s(9296);function p(t,e){1&t&&(n.TgZ(0,"span",14),n._uU(1,"Required"),n.qZA())}function h(t,e){1&t&&(n.TgZ(0,"span",14),n._uU(1,"Invalid Email"),n.qZA())}function m(t,e){1&t&&(n.TgZ(0,"span",14),n._uU(1,"Required"),n.qZA())}function g(t,e){1&t&&(n.TgZ(0,"span",14),n._uU(1,"Enter minimum 6 characters"),n.qZA())}let d=(()=>{class t{constructor(t,e,s,r,o){this.fb=t,this.authService=e,this.router=s,this.toastr=r,this.store=o,this.users=[],this.submitted=!1,this.form=this.fb.group({email:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,i.kI.compose([i.kI.required,i.kI.minLength(6)])]})}onSubmit(){this.form.invalid?(this.form.controls.email.markAsTouched(),this.form.controls.password.markAsTouched()):(this.submitted=!0,this.currentUser=this.form.value.email,this.authService.login().subscribe(t=>{let e=!1;if(console.log(t),t){this.users=t;for(let t=0;t<this.users.length;t++)this.form.value.email===this.users[t].email&&this.form.value.password===this.users[t].password?(console.log("if"),console.log(this.currentUser),localStorage.setItem("user",this.currentUser),localStorage.setItem("firstname",this.users[t].firstname),console.log(localStorage.getItem("user")),this.toastr.success("Login Success"),e=!0,this.router.navigate(["/"])):e=!1;console.log(e),e||(console.log(e),this.toastr.error("Invalid email or password"))}else console.log("Users not found")},t=>{}))}forgotPassword(){this.toastr.info("Not Implemented")}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i.qu),n.Y36(a.e),n.Y36(o.F0),n.Y36(c._W),n.Y36(l.yh))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:22,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login/signup","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["aria-label","Email","type","text","id","email","name","email","placeholder","Email","formControlName","email"],["class","error-message",4,"ngIf"],[1,"fa","fa-key","icon"],["aria-label","Password","type","password","id","password","placeholder","Password","name","password","formControlName","password"],[1,"submit-button-container"],["aria-label","Login","type","submit",1,"w-100","submit-button"],["color","accent","routerLink","/forgot-password",1,"w-100","link"],[1,"error-message"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return e.onSubmit()}),n._UZ(2,"app-header",2),n.TgZ(3,"div",3),n.TgZ(4,"a",4),n._uU(5,"Don't have an account? Sign up now!"),n.qZA(),n.TgZ(6,"div",5),n._UZ(7,"i",6),n._UZ(8,"input",7),n.qZA(),n.YNc(9,p,2,0,"span",8),n.YNc(10,h,2,0,"span",8),n.TgZ(11,"div",5),n._UZ(12,"i",9),n._UZ(13,"input",10),n.qZA(),n.YNc(14,m,2,0,"span",8),n.YNc(15,g,2,0,"span",8),n._UZ(16,"br"),n.TgZ(17,"div",11),n.TgZ(18,"button",12),n._uU(19,"LOGIN"),n.qZA(),n.qZA(),n.TgZ(20,"a",13),n._uU(21,"Forgot Password?"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(1),n.Q6J("formGroup",e.form),n.xp6(1),n.Tol("card-spacing"),n.Q6J("icon","exit_to_app")("title","Login")("hasBgImage",!0),n.xp6(7),n.Q6J("ngIf",(null==e.form.controls.email.errors?null:e.form.controls.email.errors.required)&&e.form.controls.email.touched),n.xp6(1),n.Q6J("ngIf",null==e.form.controls.email.errors?null:e.form.controls.email.errors.pattern),n.xp6(4),n.Q6J("ngIf",(null==e.form.controls.password.errors?null:e.form.controls.password.errors.required)&&e.form.controls.password.touched),n.xp6(1),n.Q6J("ngIf",e.form.controls.password.hasError("minlength")))},directives:[i._Y,i.JL,i.sg,u.G,o.yS,i.Fj,i.JJ,i.u,r.O5],styles:["html[_ngcontent-%COMP%]{background-image:url(https://images.unsplash.com/photo-1529539795054-3c162aab037a?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bG9naW58ZW58MHx8MHx8&ixlib=rb-1.2.1&q=60&w=600)}.container[_ngcontent-%COMP%]{margin-top:-50px!important}.icon[_ngcontent-%COMP%]{padding:5px;background:#283593;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width:780px){.container[_ngcontent-%COMP%]{margin-top:50px}}@media only screen and (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:0}}"]}),t})();var f=s(1368),w=s(878),v=s(4981),b=s(9996),x=s(7727),Z=s(6599),U=s(4689);(0,l.PH)("[shared state] set loading spinner",(0,l.Ky)());const S=(0,l.PH)("[shared state] set error message",(0,l.Ky)());var _=s(5479);let q=(()=>{class t{constructor(t,e,s,r,o){this.actions$=t,this.authService=e,this.store=s,this.router=r,this.toastr=o,this.login$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.h8),(0,v.z)(t=>this.authService.login().pipe((0,b.U)(t=>{this.store.dispatch(S({message:""}));const e=this.authService.formatUser(t);return this.authService.setUserInLocalStorage(e),(0,_.he)({user:e,redirect:!0})}),(0,x.K)(t=>{const e=this.authService.getErrorMessage(t.error.error.message);return(0,w.of)(S({message:e}))}))))),this.loginRedirect$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.he),(0,Z.b)(t=>{this.store.dispatch(S({message:""})),t.redirect?(this.toastr.success("Login Success"),this.router.navigate(["/"])):this.toastr.error("Login Failed")})),{dispatch:!1}),this.signupRedirect$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.$R),(0,Z.b)(t=>{this.router.navigate(["/"])})),{dispatch:!1}),this.signUp$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.UT),(0,v.z)(t=>this.authService.signUp(t.firstname,t.lastname,t.contact,t.email,t.password,t.retype_password).pipe((0,b.U)(t=>{const e=this.authService.formatUser(t);return this.authService.setUserInLocalStorage(e),(0,_.$R)({user:e})}))))),this.updateUser$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.Nq),(0,U.w)(t=>this.authService.updateUser(t.user).pipe((0,b.U)(e=>(Object.assign({},t.user),(0,_.qB)({user:t.user}))))))),this.userRedirect2$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.qB),(0,Z.b)(t=>{this.router.navigate(["/"]),this.toastr.success("Success")})),{dispatch:!1}),this.signupRedirect2$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(_.$R),(0,Z.b)(t=>{this.router.navigate(["/login"]),this.toastr.success("Signup Success")})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(f.eX),n.LFG(a.e),n.LFG(l.yh),n.LFG(o.F0),n.LFG(c._W))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})();var I=s(9031),k=s(7821),y=s(622),L=s(4769),A=s(7316),$=s(8996),T=s(7838);const G=[{path:"",children:[{path:"",redirectTo:"login"},{path:"login",component:d},{path:"signup",component:y.X}]}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[a.e,{provide:r.mr,useValue:"/"},A.x,{provide:T.i,useValue:T.i}],imports:[[$.S,r.ez,L.O,o.Bz.forChild(G),i.u5,i.UX,f.sQ.forFeature([q]),l.Aw.forFeature(I.a,k.l)]]}),t})()}}]);