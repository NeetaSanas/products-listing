(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[279],{4279:(t,e,r)=>{"use strict";r.r(e),r.d(e,{LoginModule:()=>$,routes:()=>B});var o=r(8583),n=r(3735),s=r(665),a=r(7716);class i{constructor(t,e,r,o){this.email=t,this.token=e,this.localId=r,this.expirationDate=o}get expireDate(){return this.expirationDate}get userToken(){return this.token}}var c=r(1841),l=r(4220);let u=(()=>{class t{constructor(t,e){this.http=t,this.store=e}signUp(t,e,r,o,n,s){const a={firstname:t,lastname:e,contact:r,email:o,password:n,retype_password:s};return console.log(a),this.http.post("http://localhost:3000/users",a)}login(t,e){return console.log(t,e),this.http.get("http://localhost:3000/users")}formatUser(t){const e=new Date((new Date).getTime()+1e3*+t.expiresIn);return new i(t.email,t.idToken,t.localId,e)}getErrorMessage(t){switch(t){case"EMAIL_NOT_FOUND":return"Email Not Found";case"INVALID_PASSWORD":return"Invalid Password";case"EMAIL_EXISTS":return"Email already exists";default:return"Unknown error occurred. Please try again"}}setUserInLocalStorage(t){localStorage.setItem("userData",JSON.stringify(t)),this.runTimeoutInterval(t)}runTimeoutInterval(t){const e=(new Date).getTime(),r=t.expireDate.getTime();this.timeoutInterval=setTimeout(()=>{},r-e)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(c.eN),a.LFG(l.yh))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=r(9344);function m(t,e){if(1&t&&(a.TgZ(0,"h1"),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Oqu(t.title)}}function g(t,e){if(1&t&&(a.TgZ(0,"h4",3),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Oqu(t.desc)}}let d=(()=>{class t{constructor(){this.hasBgImage=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-header"]],inputs:{icon:"icon",title:"title",desc:"desc",hasBgImage:"hasBgImage",class:"class"},decls:3,vars:5,consts:[[1,"content-header","bg-primary",3,"ngClass"],[4,"ngIf"],["class","p-2",4,"ngIf"],[1,"p-2"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.YNc(1,m,2,1,"h1",1),a.YNc(2,g,2,1,"h4",2),a.qZA()),2&t&&(a.ekj("bg-image",e.hasBgImage),a.Q6J("ngClass",e.class),a.xp6(1),a.Q6J("ngIf",e.title),a.xp6(1),a.Q6J("ngIf",e.desc))},directives:[o.mk,o.O5],styles:[".content-header[_ngcontent-%COMP%]{color:#fff!important;width:350px!important;text-align:center}.content-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:130px;border-radius:50%}.content-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;font-weight:400;margin:0}.content-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:300;max-width:580px;text-align:center;margin:0 auto}.content-header.bg-image[_ngcontent-%COMP%]{background-image:url(/assets/header-bg.png);background-blend-mode:overlay;background-size:600px;background-color:#1976d2}@media screen and (min-width: 960px){.content-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}.content-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}.content-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.content-header.has-bg-image[_ngcontent-%COMP%]{background-size:480px}}@media only screen and (max-width: 400px){.container[_ngcontent-%COMP%]{width:300px!important}}"]}),t})();function f(t,e){1&t&&(a.TgZ(0,"span",14),a._uU(1,"Email is required"),a.qZA())}function h(t,e){1&t&&(a.TgZ(0,"span",14),a._uU(1,"Invalid email"),a.qZA())}function Z(t,e){1&t&&(a.TgZ(0,"span",14),a._uU(1,"Password is required"),a.qZA())}function w(t,e){1&t&&(a.TgZ(0,"span",14),a._uU(1,"Enter minimum 6 characters"),a.qZA())}let _=(()=>{class t{constructor(t,e,r,o,n){this.fb=t,this.authService=e,this.router=r,this.toastr=o,this.store=n,this.users=[],this.form=this.fb.group({email:[null,s.kI.compose([s.kI.required,s.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])]})}ngOnInit(){console.log("login")}onSubmit(){console.log(this.form.value.email,this.form.value.password),this.currentUser=this.form.value.email,this.authService.login(this.form.value.email,this.form.value.password).subscribe(t=>{let e=!1;if(console.log(t),t){this.users=t;for(let t=0;t<this.users.length;t++)(this.form.value.email=this.users[t].email&&this.form.value.password==this.users[t].password)?(console.log("if"),console.log(this.currentUser),localStorage.setItem("user",this.currentUser),console.log(localStorage.getItem("user")),this.toastr.success("Login Success"),e=!0,this.router.navigate(["/"])):e=!1;console.log(e),e||(console.log(e),this.toastr.error("Invalid email or password"))}else console.log("Users not found")},t=>{})}forgotPassword(){}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.qu),a.Y36(u),a.Y36(n.F0),a.Y36(p._W),a.Y36(l.yh))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-login"]],decls:21,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login/signup","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","email","name","email","placeholder","Email","formControlName","email"],["class","error-message",4,"ngIf"],[1,"fa","fa-key","icon"],["type","password","id","password","placeholder","Password","name","password","formControlName","password"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button"],["color","accent","routerLink","/forgot-password",1,"w-100","link"],[1,"error-message"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return e.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Don't have an account? Sign up now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a.qZA(),a.YNc(9,f,2,0,"span",8),a.YNc(10,h,2,0,"span",8),a.TgZ(11,"div",5),a._UZ(12,"i",9),a._UZ(13,"input",10),a.qZA(),a.YNc(14,Z,2,0,"span",8),a.YNc(15,w,2,0,"span",8),a.TgZ(16,"div",11),a.TgZ(17,"button",12),a._uU(18,"LOGIN"),a.qZA(),a.qZA(),a.TgZ(19,"a",13),a._uU(20,"Forgot Password?"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","LOGIN")("hasBgImage",!0),a.xp6(7),a.Q6J("ngIf",(null==e.form.controls.email.errors?null:e.form.controls.email.errors.required)&&e.form.controls.email.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.email.errors?null:e.form.controls.email.errors.pattern),a.xp6(4),a.Q6J("ngIf",(null==e.form.controls.password.errors?null:e.form.controls.password.errors.required)&&e.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.password.hasError("minlength")))},directives:[s._Y,s.JL,s.sg,d,n.yS,s.Fj,s.JJ,s.u,o.O5],styles:["html[_ngcontent-%COMP%]{background-image:url(https://images.unsplash.com/photo-1529539795054-3c162aab037a?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bG9naW58ZW58MHx8MHx8&ixlib=rb-1.2.1&q=60&w=600)}.icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width: 780px){.container[_ngcontent-%COMP%]{margin-top:100px}}"]}),t})();var x=r(5887),I=r(5917),v=r(7479),q=r(8002),y=r(5304),U=r(3342);(0,l.PH)("[shared state] set loading spinner",(0,l.Ky)());const b=(0,l.PH)("[shared state] set error message",(0,l.Ky)()),k=(0,l.PH)("[auth page] login start",(0,l.Ky)()),T=(0,l.PH)("[auth page] login Success",(0,l.Ky)()),A=(0,l.PH)("[auth page] signup start",(0,l.Ky)()),P=(0,l.PH)("[auth page] signup Success",(0,l.Ky)());let C=(()=>{class t{constructor(t,e,r,o,n){this.actions$=t,this.authService=e,this.store=r,this.router=o,this.toastr=n,this.login$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(k),(0,v.z)(t=>this.authService.login(t.email,t.password).pipe((0,q.U)(t=>{this.store.dispatch(b({message:""}));const e=this.authService.formatUser(t);return this.authService.setUserInLocalStorage(e),T({user:e,redirect:!0})}),(0,y.K)(t=>{const e=this.authService.getErrorMessage(t.error.error.message);return(0,I.of)(b({message:e}))}))))),this.loginRedirect$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(T),(0,U.b)(t=>{this.store.dispatch(b({message:""})),t.redirect?(this.toastr.success("Login Success"),this.router.navigate(["/"])):this.toastr.error("Login Failed")})),{dispatch:!1}),this.signupRedirect$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(P),(0,U.b)(t=>{this.router.navigate(["/"])})),{dispatch:!1}),this.signUp$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(A),(0,v.z)(t=>this.authService.signUp(t.firstname,t.lastname,t.contact,t.email,t.password,t.retype_password).pipe((0,q.U)(t=>{const e=this.authService.formatUser(t);return this.authService.setUserInLocalStorage(e),P({user:e})})))))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(x.eX),a.LFG(u),a.LFG(l.yh),a.LFG(n.F0),a.LFG(p._W))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var N=r(9520),O=r(1404);function S(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function M(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function J(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function L(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Enter only numbers"),a.qZA())}function Y(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function F(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Invalid email"),a.qZA())}function Q(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function G(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Enter minimum 6 characters"),a.qZA())}function z(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Required"),a.qZA())}function E(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Enter minimum 6 characters"),a.qZA())}function D(t,e){1&t&&(a.TgZ(0,"span",20),a._uU(1,"Password not matching"),a.qZA())}const B=[{path:"",children:[{path:"",redirectTo:"login"},{path:"login",component:_},{path:"signup",component:(()=>{class t{constructor(t,e){this.fb=t,this.store=e,this.form=this.fb.group({firstname:[null,s.kI.compose([s.kI.required])],lastname:[null,s.kI.compose([s.kI.required])],contact:[null,s.kI.compose([s.kI.required,s.kI.pattern("^[0-9]+$")])],email:["",s.kI.compose([s.kI.required,s.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])],retype_password:[null,s.kI.compose([s.kI.required,s.kI.minLength(6)])]})}ngOnInit(){console.log("In signup")}onSubmit(){console.log(this.form.value),this.form.valid&&this.store.dispatch(A({firstname:this.form.value.firstname,lastname:this.form.value.lastname,contact:this.form.value.contact,email:this.form.value.email,password:this.form.value.password,retype_password:this.form.value.retype_password}))}validateForm(){if(this.form.controls.password.value!==this.form.controls.retype_password.value)return this.form.controls.retype_password.setErrors({mismatchedPasswords:!0})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.qu),a.Y36(l.yh))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-signup"]],decls:46,vars:18,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner"],["routerLink","/login","color","accent",1,"w-100","link"],[1,"form-control"],[1,"fa","fa-user","icon"],["type","text","id","firstname","placeholder","First Name","name","firstname","formControlName","firstname"],["class","error-message",4,"ngIf"],["type","text","id","lastname","placeholder","Last Name","name","lastname","formControlName","lastname"],[1,"fa","fa-phone","icon"],["type","text","id","contact","placeholder","Contact","name","contact","formControlName","contact"],[1,"fa","fa-envelope","icon"],["type","text","id","email","placeholder","Email","name","email","formControlName","email"],[1,"fa","fa-key","icon"],["type","password","placeholder","Password","id","password","name","password","formControlName","password",3,"input"],["type","password","placeholder","Retype Password","id","retype_password","name","retype_password","formControlName","retype_password",3,"input"],[1,"submit-button-container"],["type","submit",1,"w-100","submit-button",3,"disabled"],["color","accent","routerLink","/",1,"w-100","link"],[1,"error-message"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("ngSubmit",function(){return e.onSubmit()}),a._UZ(2,"app-header",2),a.TgZ(3,"div",3),a.TgZ(4,"a",4),a._uU(5,"Already have an account? login now!"),a.qZA(),a.TgZ(6,"div",5),a._UZ(7,"i",6),a._UZ(8,"input",7),a._UZ(9,"br"),a.qZA(),a.YNc(10,S,2,0,"span",8),a.TgZ(11,"div",5),a._UZ(12,"i",6),a._UZ(13,"input",9),a._UZ(14,"br"),a.qZA(),a.YNc(15,M,2,0,"span",8),a.TgZ(16,"div",5),a._UZ(17,"i",10),a._UZ(18,"input",11),a._UZ(19,"br"),a.qZA(),a.YNc(20,J,2,0,"span",8),a.YNc(21,L,2,0,"span",8),a.TgZ(22,"div",5),a._UZ(23,"i",12),a._UZ(24,"input",13),a._UZ(25,"br"),a.qZA(),a.YNc(26,Y,2,0,"span",8),a.YNc(27,F,2,0,"span",8),a.TgZ(28,"div",5),a._UZ(29,"i",14),a.TgZ(30,"input",15),a.NdJ("input",function(){return e.validateForm()}),a.qZA(),a._UZ(31,"br"),a.qZA(),a.YNc(32,Q,2,0,"span",8),a.YNc(33,G,2,0,"span",8),a.TgZ(34,"div",5),a._UZ(35,"i",14),a.TgZ(36,"input",16),a.NdJ("input",function(){return e.validateForm()}),a.qZA(),a._UZ(37,"br"),a.qZA(),a.YNc(38,z,2,0,"span",8),a.YNc(39,E,2,0,"span",8),a.YNc(40,D,2,0,"span",8),a.TgZ(41,"div",17),a.TgZ(42,"button",18),a._uU(43,"SIGNUP"),a.qZA(),a.qZA(),a.TgZ(44,"a",19),a._uU(45,"Back to Homepage"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("formGroup",e.form),a.xp6(1),a.Tol("card-spacing"),a.Q6J("icon","exit_to_app")("title","SIGNUP")("hasBgImage",!0),a.xp6(8),a.Q6J("ngIf",(null==e.form.controls.firstname.errors?null:e.form.controls.firstname.errors.required)&&e.form.controls.firstname.touched),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.lastname.errors?null:e.form.controls.lastname.errors.required)&&e.form.controls.lastname.touched),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.contact.errors?null:e.form.controls.contact.errors.required)&&e.form.controls.contact.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.contact.errors?null:e.form.controls.contact.errors.pattern),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.email.errors?null:e.form.controls.email.errors.required)&&e.form.controls.email.touched),a.xp6(1),a.Q6J("ngIf",null==e.form.controls.email.errors?null:e.form.controls.email.errors.pattern),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.password.errors?null:e.form.controls.password.errors.required)&&e.form.controls.password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.password.hasError("minlength")),a.xp6(5),a.Q6J("ngIf",(null==e.form.controls.retype_password.errors?null:e.form.controls.retype_password.errors.required)&&e.form.controls.retype_password.touched),a.xp6(1),a.Q6J("ngIf",e.form.controls.retype_password.hasError("minlength")),a.xp6(1),a.Q6J("ngIf",e.form.controls.retype_password.hasError("mismatchedPasswords")),a.xp6(2),a.Q6J("disabled",!e.form.valid))},directives:[s._Y,s.JL,s.sg,d,n.yS,s.Fj,s.JJ,s.u,o.O5],styles:[".icon[_ngcontent-%COMP%]{padding:5px;background:#1e90ff;color:#fff;min-width:50px;text-align:center}.form-control[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:74%}@media only screen and (max-width: 780px){.container[_ngcontent-%COMP%]{margin-top:100px}}"]}),t})()}]}];let $=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[u,{provide:o.mr,useValue:"/"}],imports:[[o.ez,n.Bz.forChild(B),s.u5,s.UX,x.sQ.forFeature([C]),l.Aw.forFeature(N.a,O.l)]]}),t})()}}]);