(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[891],{1891:(t,o,e)=>{"use strict";e.r(o),e.d(o,{ProductsModule:()=>j});var r=e(5887),n=e(3735),i=e(8583),c=e(665),s=e(2700),d=e(7716),p=e(4220),a=e(9765);class u{constructor(){this._afterClosed=new a.xQ,this.afterClosed=this._afterClosed.asObservable()}close(t){this._afterClosed.next(t)}}var l=e(8262);function g(t,o){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"p"),d._uU(2,"Required"),d.qZA(),d.qZA())}function h(t,o){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"p"),d._uU(2,"Required"),d.qZA(),d.qZA())}function m(t,o){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"p"),d._uU(2,"Required"),d.qZA(),d.qZA())}let f=(()=>{class t{constructor(t,o){this.store=t,this.dialogRef=o}ngOnInit(){this.productForm=new c.cw({name:new c.NI(null,c.kI.required),description:new c.NI(null,c.kI.required),price:new c.NI(null,c.kI.required)})}onAddProduct(){console.log(this.productForm),this.productForm.valid&&(this.store.dispatch((0,s.gK)({product:{id:"",name:this.productForm.value.name,description:this.productForm.value.description,price:this.productForm.value.price}})),this.dialogRef.close())}cancel(){this.dialogRef.close()}}return t.\u0275fac=function(o){return new(o||t)(d.Y36(p.yh),d.Y36(u))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-add-product"]],decls:30,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner",2,"margin-top","-20px"],[1,"form-control"],["type","text","formControlName","name"],[4,"ngIf"],["type","text","formControlName","price"],["type","text","formControlName","description"],["fxLayout","row","fxLayoutAlign","space-between center",1,"submit-button-container"],["type","submit",1,"w-30","submit-button",3,"disabled"],[1,"w-30","cancel-button",3,"click"]],template:function(t,o){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"form",1),d.NdJ("ngSubmit",function(){return o.onAddProduct()}),d._UZ(2,"app-header",2),d.TgZ(3,"div",3),d.TgZ(4,"div",4),d.TgZ(5,"label"),d._uU(6,"Name"),d.qZA(),d._UZ(7,"input",5),d.YNc(8,g,3,0,"div",6),d.qZA(),d._UZ(9,"br"),d.TgZ(10,"div",4),d.TgZ(11,"label"),d._uU(12,"Price"),d.qZA(),d._UZ(13,"input",7),d.YNc(14,h,3,0,"div",6),d.qZA(),d._UZ(15,"br"),d.TgZ(16,"div",4),d.TgZ(17,"label"),d._uU(18,"Description"),d.qZA(),d._UZ(19,"input",8),d.YNc(20,m,3,0,"div",6),d.qZA(),d._UZ(21,"br"),d._UZ(22,"br"),d.TgZ(23,"div",9),d._UZ(24,"br"),d.TgZ(25,"button",10),d._uU(26,"Add"),d.qZA(),d._uU(27," \xa0\xa0\xa0\xa0 "),d.TgZ(28,"button",11),d.NdJ("click",function(){return o.cancel()}),d._uU(29,"Cancel"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("formGroup",o.productForm),d.xp6(1),d.Tol("card-spacing"),d.Q6J("icon","exit_to_app")("title","ADD PRODUCT")("hasBgImage",!0),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.name.errors?null:o.productForm.controls.name.errors.required)&&o.productForm.controls.name.touched),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.price.errors?null:o.productForm.controls.price.errors.required)&&o.productForm.controls.price.touched),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.description.errors?null:o.productForm.controls.description.errors.required)&&o.productForm.controls.description.touched),d.xp6(5),d.Q6J("disabled",!o.productForm.valid))},directives:[c._Y,c.JL,c.sg,l.G,c.Fj,c.JJ,c.u,i.O5],styles:[".secondary-text-color[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}p[_ngcontent-%COMP%]{font-size:12px;color:red;justify-content:left}"]}),t})();var Z=e(8002),b=e(1841);let v=(()=>{class t{constructor(t,o){this.http=t,this.store=o}getProducts(){return this.http.get("http://localhost:3000/products").pipe((0,Z.U)(t=>{const o=[];for(let e in t){let r=t[e].id;o.push(Object.assign(Object.assign({},t[e]),{id:r}))}return o}))}addProduct(t){return this.http.post("http://localhost:3000/products",t)}updateProduct(t){const o={[t.id]:{id:t.id,name:t.name,description:t.description,price:t.price}};return console.log(t.id,o),this.http.patch(`http://localhost:3000/products/${t.id}`,o)}deleteProduct(t){return console.log(t),this.http.delete(`http://localhost:3000/products/${t}`)}}return t.\u0275fac=function(o){return new(o||t)(d.LFG(b.eN),d.LFG(p.yh))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=e(9773),x=e(3190),C=e(3342),y=e(9344);let q=(()=>{class t{constructor(t,o,e,n,i){this.actions$=t,this.productsService=o,this.store=e,this.router=n,this.toastr=i,this.loadProducts$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.QD),(0,_.zg)(t=>this.productsService.getProducts().pipe((0,Z.U)(t=>(0,s.UE)({products:t})))))),this.addProduct$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.gK),(0,_.zg)(t=>this.productsService.addProduct(t.product).pipe((0,Z.U)(o=>{const e=Object.assign(Object.assign({},t.product),{id:o.name});return(0,s.NV)({product:e})}))))),this.updateProduct$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.nM),(0,x.w)(t=>this.productsService.updateProduct(t.product).pipe((0,Z.U)(o=>(Object.assign({},t.product),(0,s.j7)({product:t.product}))))))),this.deleteProduct$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.Ir),(0,x.w)(t=>this.productsService.deleteProduct(t.id).pipe((0,Z.U)(o=>(0,s.Bl)({id:t.id})))))),this.productRedirect$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.Bl),(0,C.b)(t=>{this.router.navigate(["/products"]),this.toastr.success("Success")})),{dispatch:!1}),this.productRedirect1$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.NV),(0,C.b)(t=>{this.toastr.success("Success"),this.router.navigate(["/products"])})),{dispatch:!1}),this.productRedirect2$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(s.j7),(0,C.b)(t=>{this.router.navigate(["/products"]),this.toastr.success("Success")})),{dispatch:!1})}}return t.\u0275fac=function(o){return new(o||t)(d.LFG(r.eX),d.LFG(v),d.LFG(p.yh),d.LFG(n.F0),d.LFG(y._W))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac}),t})();const A=(0,p.ZF)("products"),F=(0,p.P1)(A,t=>t.products),U=(0,p.P1)(A,(t,o)=>t.products.find(t=>t.id===o.id));class T{}function w(t,o){1&t&&(d.TgZ(0,"div"),d._uU(1,"Required"),d.qZA())}function P(t,o){1&t&&(d.TgZ(0,"div"),d._uU(1,"Required"),d.qZA())}function O(t,o){1&t&&(d.TgZ(0,"div"),d._uU(1,"Required"),d.qZA())}let N=(()=>{class t{constructor(t,o,e,r){this.route=t,this.store=o,this.dialogRef=e,this.config=r}ngOnInit(){console.log(this.config),this.productData=this.config.data,this.route.paramMap.subscribe(t=>{const o=t.get("id");this.store.select(U,{id:o}).subscribe(t=>{this.product=t,this.createForm()})})}createForm(){console.log(this.productData.name),this.productForm=new c.cw({name:new c.NI(this.productData.name,c.kI.required),description:new c.NI(this.productData.description,c.kI.required),price:new c.NI(this.productData.price,c.kI.required)})}ngOnDestroy(){this.productSubscription&&this.productSubscription.unsubscribe()}onUpdateProduct(){this.productForm.valid&&(this.store.dispatch((0,s.nM)({product:{id:this.productData.id,name:this.productForm.value.name,description:this.productForm.value.description,price:this.productForm.value.price}})),this.dialogRef.close())}cancel(){this.dialogRef.close()}}return t.\u0275fac=function(o){return new(o||t)(d.Y36(n.gz),d.Y36(p.yh),d.Y36(u),d.Y36(T))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-edit-product"]],decls:30,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"h-100","container"],["fxFlex","90","fxFlex.gt-sm","30","fxFlex.sm","60",2,"background-color","#f3f3f3",3,"formGroup","ngSubmit"],[3,"icon","title","hasBgImage"],[1,"card-inner",2,"margin-top","-20px"],[1,"form-control"],["type","text","formControlName","name"],[4,"ngIf"],["type","text","formControlName","price"],["type","text","formControlName","description"],["fxLayout","row","fxLayoutAlign","space-between center",1,"submit-button-container"],["type","submit",1,"w-30","submit-button",3,"disabled"],[1,"w-30","cancel-button",3,"click"]],template:function(t,o){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"form",1),d.NdJ("ngSubmit",function(){return o.onUpdateProduct()}),d._UZ(2,"app-header",2),d.TgZ(3,"div",3),d.TgZ(4,"div",4),d.TgZ(5,"label"),d._uU(6,"Name"),d.qZA(),d._UZ(7,"input",5),d.YNc(8,w,2,0,"div",6),d.qZA(),d._UZ(9,"br"),d.TgZ(10,"div",4),d.TgZ(11,"label"),d._uU(12,"Price"),d.qZA(),d._UZ(13,"input",7),d.YNc(14,P,2,0,"div",6),d.qZA(),d._UZ(15,"br"),d.TgZ(16,"div",4),d.TgZ(17,"label"),d._uU(18,"Description"),d.qZA(),d._UZ(19,"input",8),d.YNc(20,O,2,0,"div",6),d.qZA(),d._UZ(21,"br"),d._UZ(22,"br"),d.TgZ(23,"div",9),d._UZ(24,"br"),d.TgZ(25,"button",10),d._uU(26,"Update"),d.qZA(),d._uU(27," \xa0\xa0\xa0\xa0 "),d.TgZ(28,"button",11),d.NdJ("click",function(){return o.cancel()}),d._uU(29,"Cancel"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("formGroup",o.productForm),d.xp6(1),d.Tol("card-spacing"),d.Q6J("icon","exit_to_app")("title","UPDATE PRODUCT")("hasBgImage",!0),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.name.errors?null:o.productForm.controls.name.errors.required)&&o.productForm.controls.name.touched),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.price.errors?null:o.productForm.controls.price.errors.required)&&o.productForm.controls.price.touched),d.xp6(6),d.Q6J("ngIf",(null==o.productForm.controls.description.errors?null:o.productForm.controls.description.errors.required)&&o.productForm.controls.description.touched),d.xp6(5),d.Q6J("disabled",!o.productForm.valid))},directives:[c._Y,c.JL,c.sg,l.G,c.Fj,c.JJ,c.u,i.O5],styles:[""]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez]]}),t})();class R{constructor(t,o){this._parentInjector=t,this._additionalTokens=o}get(t,o,e){return this._additionalTokens.get(t)||this._parentInjector.get(t,o)}}let k=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(o){return new(o||t)(d.Y36(d.s_b))},t.\u0275dir=d.lG2({type:t,selectors:[["","appInsertion",""]]}),t})();function D(t,o){}let M=(()=>{class t{constructor(t,o,e){this.componentFactoryResolver=t,this.cd=o,this.dialogRef=e,this._onClose=new a.xQ,this.onClose=this._onClose.asObservable()}ngAfterViewInit(){this.loadChildComponent(this.childComponentType),this.cd.detectChanges()}ngOnDestroy(){this.componentRef&&this.componentRef.destroy()}onOverlayClicked(t){this.dialogRef.close()}onDialogClicked(t){t.stopPropagation()}loadChildComponent(t){let o=this.componentFactoryResolver.resolveComponentFactory(t),e=this.insertionPoint.viewContainerRef;e.clear(),this.componentRef=e.createComponent(o)}close(){this._onClose.next()}}return t.\u0275fac=function(o){return new(o||t)(d.Y36(d._Vd),d.Y36(d.sBO),d.Y36(u))},t.\u0275cmp=d.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&d.Gf(k,5),2&t){let t;d.iGM(t=d.CRH())&&(o.insertionPoint=t.first)}},decls:3,vars:0,consts:[[1,"overlay",3,"click"],[1,"dialog",3,"click"],["appInsertion",""]],template:function(t,o){1&t&&(d.TgZ(0,"div",0),d.NdJ("click",function(t){return o.onOverlayClicked(t)}),d.TgZ(1,"div",1),d.NdJ("click",function(t){return o.onDialogClicked(t)}),d.YNc(2,D,0,0,"ng-template",2),d.qZA(),d.qZA())},directives:[k],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;background:#000000b3;align-items:center;justify-content:center}.dialog[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dialog[_ngcontent-%COMP%]{background-color:initial;padding:0}"]}),t})(),J=(()=>{class t{constructor(t,o,e){this.componentFactoryResolver=t,this.appRef=o,this.injector=e}open(t,o){const e=this.appendDialogComponentToBody(o);return this.dialogComponentRef.instance.childComponentType=t,e}appendDialogComponentToBody(t){const o=new WeakMap;o.set(T,t);const e=new u;o.set(u,e);const r=e.afterClosed.subscribe(()=>{this.removeDialogComponentFromBody(),r.unsubscribe()}),n=this.componentFactoryResolver.resolveComponentFactory(M).create(new R(this.injector,o));return this.appRef.attachView(n.hostView),document.body.appendChild(n.hostView.rootNodes[0]),this.dialogComponentRef=n,this.dialogComponentRef.instance.onClose.subscribe(()=>{this.removeDialogComponentFromBody()}),e}removeDialogComponentFromBody(){this.appRef.detachView(this.dialogComponentRef.hostView),this.dialogComponentRef.destroy()}close(){this.dialogComponentRef.instance.onClose.subscribe(()=>{this.removeDialogComponentFromBody()})}}return t.\u0275fac=function(o){return new(o||t)(d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(d.zs3))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:I}),t})();function Y(t,o){if(1&t){const t=d.EpF();d.TgZ(0,"div",12),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.TgZ(3,"h2"),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA(),d.TgZ(7,"button",6),d.NdJ("click",function(){const o=d.CHM(t).$implicit;return d.oxw().openUpdateDialog(o)}),d._uU(8,"Update"),d.qZA(),d._uU(9,"\xa0\xa0 "),d.TgZ(10,"button",6),d.NdJ("click",function(){const o=d.CHM(t).$implicit;return d.oxw().deleteProduct(o.id)}),d._uU(11,"Delete"),d.qZA(),d.qZA()}if(2&t){const t=o.$implicit;d.xp6(2),d.Oqu(t.id),d.xp6(2),d.AsE("",t.name," \xa0\xa0\xa0\xa0",t.price," "),d.xp6(2),d.Oqu(t.description)}}function G(t,o){1&t&&(d.TgZ(0,"div",12),d.TgZ(1,"h1"),d._uU(2,"No Products added"),d.qZA(),d.qZA())}let L=(()=>{class t{constructor(t,o,e){this.store=t,this.router=o,this.dialog=e,this.NoProducts=!1}ngOnInit(){this.products=this.store.select(F),this.store.dispatch((0,s.QD)())}deleteProduct(t){confirm("Are you sure you want to delete?")&&(this.store.dispatch((0,s.Ir)({id:t})),this.router.navigate(["/products"]),this.products=this.store.select(F),this.store.dispatch((0,s.QD)())),this.products||(this.NoProducts=!0)}viewProduct(){}openAddDialog(){this.dialog.open(f,{data:{message:"testing"}}).afterClosed.subscribe(t=>{console.log("Dialog closed",t),this.products=this.store.select(F),this.store.dispatch((0,s.QD)())})}openUpdateDialog(t){console.log(t),this.dialog.open(N,{data:t}).afterClosed.subscribe(t=>{console.log("Dialog closed",t)})}}return t.\u0275fac=function(o){return new(o||t)(d.Y36(p.yh),d.Y36(n.F0),d.Y36(J))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-products-list"]],decls:23,vars:4,consts:[[1,"outer"],[1,"list-col1"],["id","products",1,"mt-2","pt-3"],["fxLayout","column","fxLayoutAlign","center center",1,"title-section","p-2","mb-2"],[1,"secondary-text-color"],[2,"margin-bottom","10px"],[3,"click"],[1,"container"],["class","card",4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"list-col2"],[2,"width","30%"],[1,"card"]],template:function(t,o){1&t&&(d._UZ(0,"br"),d._UZ(1,"br"),d.TgZ(2,"div",0),d.TgZ(3,"div",1),d.TgZ(4,"div",2),d.TgZ(5,"div",3),d.TgZ(6,"h1"),d._uU(7,"PRODUCTS LIST"),d.qZA(),d.TgZ(8,"p",4),d._uU(9,"Explore products of your choice..."),d.qZA(),d.qZA(),d.TgZ(10,"div",5),d.TgZ(11,"button",6),d.NdJ("click",function(){return o.openAddDialog()}),d._uU(12,"Add Product"),d.qZA(),d.qZA(),d._UZ(13,"br"),d._UZ(14,"br"),d.TgZ(15,"div",7),d.YNc(16,Y,12,4,"div",8),d.ALo(17,"async"),d.qZA(),d.YNc(18,G,3,0,"div",9),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"div",10),d._UZ(20,"div",11),d._UZ(21,"router-outlet"),d._UZ(22,"div",11),d.qZA()),2&t&&(d.xp6(16),d.Q6J("ngForOf",d.lcZ(17,2,o.products)),d.xp6(2),d.Q6J("ngIf",o.NoProducts))},directives:[i.sg,i.O5,n.lC],pipes:[i.Ov],styles:[".outer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.outer[_ngcontent-%COMP%]   .list-col1[_ngcontent-%COMP%]{width:100%;flex-direction:column}.list-col2[_ngcontent-%COMP%]{margin-top:-40px!important;width:100%;flex-direction:row}.list-col2[_ngcontent-%COMP%], .secondary-text-color[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:150px;grid-gap:30px;grid-row-gap:40px;margin-top:0}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{transition:all .5s ease-out;border:1px solid #000;border-radius:5px;padding:10px;grid-row-gap:20px;row-gap:20px;margin-bottom:10px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{height:100px;width:100%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background-color:#1976d2;color:#fff;border-radius:20px;font-size:16px;padding:5px 7px;border:0}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{margin-top:-20px}@media only screen and (max-width: 800px) and (min-width: 550px){.container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media only screen and (max-width: 550px){.container[_ngcontent-%COMP%]{grid-template-columns:2fr}}"]}),t})();var Q=e(9880);const $=[{path:"",component:L,children:[{path:"add",component:f},{path:"edit/:id",component:N}]}];let j=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[v,J],imports:[[i.ez,Q.O,c.UX,n.Bz.forChild($),r.sQ.forFeature([q]),I]]}),t})()}}]);